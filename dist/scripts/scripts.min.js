"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}
/*!
 * @copyright Copyright (c) 2017 IcoMoon.io
 * @license   Licensed under MIT license
 *            See https://github.com/Keyamoon/svgxuse
 * @version   1.2.6
 */function memoryGame(){var e,t=[{name:"leaf",img:"./assets/icons/sprite.svg#leaf"},{name:"brightness-up",img:"./assets/icons/sprite.svg#brightness-up"},{name:"star",img:"./assets/icons/sprite.svg#star"},{name:"flame",img:"./assets/icons/sprite.svg#flame"},{name:"mountain",img:"./assets/icons/sprite.svg#mountain"},{name:"music",img:"./assets/icons/sprite.svg#music"}],n=document.querySelector(".memory-game__root"),r=document.querySelector("#memory-game__alert"),o=r.textContent,i=document.querySelector("#memory-game__result"),a=document.querySelector("#memory-game__button"),s="./assets/icons/sprite.svg#search",u="./assets/icons/sprite.svg#check",l=[],c=[],m=[];function d(){t.sort((function(){return.5-Math.random()}));for(var r=0;r<t.length;r++){var o=document.createElement("div"),i=document.createElement("img");i.setAttribute("src",s),i.setAttribute("alt","card"),o.setAttribute("data-memorygameid",r),o.addEventListener("click",h),o.appendChild(i),n.appendChild(o)}e=n.querySelectorAll("div")}function g(){var n=l[0],o=l[1],a=c[0],s=c[1];a===s?(r.textContent="You have clicked the same image",y()):n===o?(r.textContent="You found a match",e[a].querySelector("img").setAttribute("src",u),e[s].querySelector("img").setAttribute("src",u),e[a].removeEventListener("click",h),e[s].removeEventListener("click",h),m.push(c)):(r.textContent="Try again",y()),l=[],c=[],i.textContent=m.length,m.length===t.length/2&&(r.textContent="Congratulations! You found them all")}function h(e){var n=e.target.closest("div").querySelector("img"),r=e.target.closest("div").getAttribute("data-memorygameid");l.push(t[r].name),c.push(r),n.setAttribute("src",t[r].img),2===l.length&&setTimeout(g,500),l.length>2&&y()}function y(){e.forEach((function(e){m.flat(1/0).includes(e.dataset.memorygameid)||e.querySelector("img").setAttribute("src",s)}))}t=[].concat(_toConsumableArray(t),_toConsumableArray(t)),d(),a.addEventListener("click",(function(){l=[],c=[],m=[],r.textContent=o,i.textContent=m.length,n.textContent="",d()}))}!function(){if("undefined"!=typeof window&&window.addEventListener){var e,t,n,r=Object.create(null),o=function(){clearTimeout(t),t=setTimeout(e,100)},i=function(){},a=function(e){function t(e){var t;return void 0!==e.protocol?t=e:(t=document.createElement("a")).href=e,t.protocol.replace(/:/g,"")+t.host}var n,r,o;return window.XMLHttpRequest&&(n=new XMLHttpRequest,r=t(location),o=t(e),n=void 0===n.withCredentials&&""!==o&&o!==r?XDomainRequest||void 0:XMLHttpRequest),n},s="http://www.w3.org/1999/xlink";e=function(){var e,t,n,u,l,c,m,d,g,h,y=0;function f(){var e;0===(y-=1)&&(i(),window.addEventListener("resize",o,!1),window.addEventListener("orientationchange",o,!1),window.MutationObserver?((e=new MutationObserver(o)).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),i=function(){try{e.disconnect(),window.removeEventListener("resize",o,!1),window.removeEventListener("orientationchange",o,!1)}catch(e){}}):(document.documentElement.addEventListener("DOMSubtreeModified",o,!1),i=function(){document.documentElement.removeEventListener("DOMSubtreeModified",o,!1),window.removeEventListener("resize",o,!1),window.removeEventListener("orientationchange",o,!1)}))}function v(e){return function(){!0!==r[e.base]&&(e.useEl.setAttributeNS(s,"xlink:href","#"+e.hash),e.useEl.hasAttribute("href")&&e.useEl.setAttribute("href","#"+e.hash))}}function b(e){return function(){var t,n=document.body,r=document.createElement("x");e.onload=null,r.innerHTML=e.responseText,(t=r.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",n.insertBefore(t,n.firstChild)),f()}}function p(e){return function(){e.onerror=null,e.ontimeout=null,f()}}for(i(),g=document.getElementsByTagName("use"),l=0;l<g.length;l+=1){try{t=g[l].getBoundingClientRect()}catch(e){t=!1}e=(d=(u=g[l].getAttribute("href")||g[l].getAttributeNS(s,"href")||g[l].getAttribute("xlink:href"))&&u.split?u.split("#"):["",""])[0],n=d[1],c=t&&0===t.left&&0===t.right&&0===t.top&&0===t.bottom,t&&0===t.width&&0===t.height&&!c?(g[l].hasAttribute("href")&&g[l].setAttributeNS(s,"xlink:href",u),e.length&&(!0!==(h=r[e])&&setTimeout(v({useEl:g[l],base:e,hash:n}),0),void 0===h&&void 0!==(m=a(e))&&(h=new m,r[e]=h,h.onload=b(h),h.onerror=p(h),h.ontimeout=p(h),h.open("GET",e),h.send(),y+=1))):c?e.length&&r[e]&&setTimeout(v({useEl:g[l],base:e,hash:n}),0):void 0===r[e]?r[e]=!0:r[e].onload&&(r[e].abort(),delete r[e].onload,r[e]=!0)}g="",y+=1,f()},n=function(){window.removeEventListener("load",n,!1),t=setTimeout(e,0)},"complete"!==document.readyState?window.addEventListener("load",n,!1):n()}}(),document.addEventListener("DOMContentLoaded",(function(){function e(e){var n=e.nextElementSibling;n.style.maxHeight?(n.style.maxHeight=null,e===t&&(t.querySelector("svg").style.transform="rotate(180deg)")):(n.style.maxHeight=n.scrollHeight+"px",e===t&&(t.querySelector("svg").style.transform="rotate(0deg)"))}var t=document.querySelector(".hero__title"),n=document.querySelector(".hero").querySelector("ul"),r=document.querySelectorAll(".content__item");e(t),t.addEventListener("click",(function(n){e(t)})),n.addEventListener("click",(function(n){var o=n.target.dataset.type;e(t);for(var i=0;i<r.length;i++)r[i].style.display="none",r[i].classList.contains(o)&&(r[i].style.display="flex")})),memoryGame()}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJyIiwiX2FycmF5V2l0aG91dEhvbGVzIiwiX2l0ZXJhYmxlVG9BcnJheSIsIl91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSIsIl9ub25JdGVyYWJsZVNwcmVhZCIsIlR5cGVFcnJvciIsIm8iLCJtaW5MZW4iLCJfYXJyYXlMaWtlVG9BcnJheSIsIm4iLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJzbGljZSIsImNvbnN0cnVjdG9yIiwibmFtZSIsIkFycmF5IiwiZnJvbSIsInRlc3QiLCJpdGVyIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJpc0FycmF5IiwibGVuIiwibGVuZ3RoIiwiaSIsImFycjIiLCJtZW1vcnlHYW1lIiwiY2FyZHMiLCJjYXJkQXJyYXkiLCJpbWciLCJyb290IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWxlcnQiLCJhbGVydE5ld0dhbWUiLCJ0ZXh0Q29udGVudCIsInJlc3VsdCIsImJ1dHRvbk5ld0dhbWUiLCJzZWFyY2hJbWdQYXRoIiwiY2hlY2tJbWdQYXRoIiwiY2FyZHNDaG9zZW4iLCJjYXJkc0Nob3NlbklkIiwiY2FyZHNXb24iLCJjcmVhdGVCb2FyZCIsInNvcnQiLCJNYXRoIiwicmFuZG9tIiwiY2FyZERpdiIsImNyZWF0ZUVsZW1lbnQiLCJjYXJkSW1nIiwic2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImZsaXBDYXJkIiwiYXBwZW5kQ2hpbGQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2hlY2tGb3JNYXRjaCIsIm9wdGlvbk9uZSIsIm9wdGlvblR3byIsIm9wdGlvbk9uZUlkIiwib3B0aW9uVHdvSWQiLCJoaWRlQ2FyZHMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicHVzaCIsImV2ZW50IiwidGFyZ2V0IiwiY2xvc2VzdCIsImNhcmRJZCIsImdldEF0dHJpYnV0ZSIsInNldFRpbWVvdXQiLCJmb3JFYWNoIiwiaXRlbSIsImZsYXQiLCJJbmZpbml0eSIsImluY2x1ZGVzIiwiZGF0YXNldCIsIm1lbW9yeWdhbWVpZCIsImNvbmNhdCIsIndpbmRvdyIsImNoZWNrVXNlRWxlbXMiLCJ0aWQiLCJ3aW5Mb2FkIiwiY2FjaGUiLCJjcmVhdGUiLCJkZWJvdW5jZWRDaGVjayIsImNsZWFyVGltZW91dCIsInVub2JzZXJ2ZUNoYW5nZXMiLCJjcmVhdGVSZXF1ZXN0IiwidXJsIiwiZ2V0T3JpZ2luIiwibG9jIiwiYSIsInVuZGVmaW5lZCIsInByb3RvY29sIiwiaHJlZiIsInJlcGxhY2UiLCJob3N0IiwiUmVxdWVzdCIsIm9yaWdpbiIsIm9yaWdpbjIiLCJYTUxIdHRwUmVxdWVzdCIsImxvY2F0aW9uIiwid2l0aENyZWRlbnRpYWxzIiwiWERvbWFpblJlcXVlc3QiLCJ4bGlua05TIiwiYmFzZSIsImJjciIsImhhc2giLCJpc0hpZGRlbiIsInVzZXMiLCJ4aHIiLCJpblByb2dyZXNzQ291bnQiLCJvYnNlcnZlSWZEb25lIiwib2JzZXJ2ZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwib2JzZXJ2ZSIsImRvY3VtZW50RWxlbWVudCIsImNoaWxkTGlzdCIsInN1YnRyZWUiLCJhdHRyaWJ1dGVzIiwiZGlzY29ubmVjdCIsImlnbm9yZSIsImF0dHJVcGRhdGVGdW5jIiwic3BlYyIsInVzZUVsIiwic2V0QXR0cmlidXRlTlMiLCJoYXNBdHRyaWJ1dGUiLCJvbmxvYWRGdW5jIiwic3ZnIiwiYm9keSIsIngiLCJvbmxvYWQiLCJpbm5lckhUTUwiLCJyZXNwb25zZVRleHQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInN0eWxlIiwicG9zaXRpb24iLCJ3aWR0aCIsImhlaWdodCIsIm92ZXJmbG93IiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsIm9uRXJyb3JUaW1lb3V0Iiwib25lcnJvciIsIm9udGltZW91dCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImdldEF0dHJpYnV0ZU5TIiwic3BsaXQiLCJsZWZ0IiwicmlnaHQiLCJ0b3AiLCJib3R0b20iLCJvcGVuIiwic2VuZCIsImFib3J0IiwicmVhZHlTdGF0ZSIsIm9wZW5BY2MiLCJlbCIsInBhbmVsIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwibWF4SGVpZ2h0IiwiY2hvb3NlVGl0bGUiLCJ0cmFuc2Zvcm0iLCJzY3JvbGxIZWlnaHQiLCJnYW1lTGlzdCIsImdhbWVDb250ZW50IiwiY2xpY2tlZEl0ZW0iLCJ0eXBlIiwiZGlzcGxheSIsImNsYXNzTGlzdCIsImNvbnRhaW5zIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLFNBQVNBLG1CQUFtQkMsR0FBTyxPQUFPQyxtQkFBbUJELElBQVFFLGlCQUFpQkYsSUFBUUcsNEJBQTRCSCxJQUFRSSxxQkFFbEksU0FBU0EscUJBQXVCLE1BQU0sSUFBSUMsVUFBVSx3SUFFcEQsU0FBU0YsNEJBQTRCRyxFQUFHQyxHQUFVLEdBQUtELEVBQUwsQ0FBZ0IsR0FBaUIsaUJBQU5BLEVBQWdCLE9BQU9FLGtCQUFrQkYsRUFBR0MsR0FBUyxJQUFJRSxFQUFJQyxPQUFPQyxVQUFVQyxTQUFTQyxLQUFLUCxHQUFHUSxNQUFNLEdBQUksR0FBaUUsTUFBbkQsV0FBTkwsR0FBa0JILEVBQUVTLGNBQWFOLEVBQUlILEVBQUVTLFlBQVlDLE1BQWdCLFFBQU5QLEdBQXFCLFFBQU5BLEVBQW9CUSxNQUFNQyxLQUFLWixHQUFjLGNBQU5HLEdBQXFCLDJDQUEyQ1UsS0FBS1YsR0FBV0Qsa0JBQWtCRixFQUFHQyxRQUF6RyxHQUU3UyxTQUFTTCxpQkFBaUJrQixHQUFRLEdBQXNCLG9CQUFYQyxRQUFtRCxNQUF6QkQsRUFBS0MsT0FBT0MsV0FBMkMsTUFBdEJGLEVBQUssY0FBdUIsT0FBT0gsTUFBTUMsS0FBS0UsR0FFdEosU0FBU25CLG1CQUFtQkQsR0FBTyxHQUFJaUIsTUFBTU0sUUFBUXZCLEdBQU0sT0FBT1Esa0JBQWtCUixHQUVwRixTQUFTUSxrQkFBa0JSLEVBQUt3QixJQUFrQixNQUFQQSxHQUFlQSxFQUFNeEIsRUFBSXlCLFVBQVFELEVBQU14QixF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LE1BQU1pQyxRQUFVLE9BRTNCSCxFQUFZNUksR0FBR2dKLFVBQVVDLFNBQVNKLEtBQ2xDRCxFQUFZNUksR0FBRzhHLE1BQU1pQyxRQUFVLFdBSzNDN0kiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDE3IEljb01vb24uaW9cbiAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2VcbiAqICAgICAgICAgICAgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9LZXlhbW9vbi9zdmd4dXNlXG4gKiBAdmVyc2lvbiAgIDEuMi42XG4gKi9cbi8qanNsaW50IGJyb3dzZXI6IHRydWUgKi9cbi8qZ2xvYmFsIFhEb21haW5SZXF1ZXN0LCBNdXRhdGlvbk9ic2VydmVyLCB3aW5kb3cgKi9cbihmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTsgLy8gaG9sZHMgeGhyIG9iamVjdHMgdG8gcHJldmVudCBtdWx0aXBsZSByZXF1ZXN0c1xuICAgICAgICB2YXIgY2hlY2tVc2VFbGVtcztcbiAgICAgICAgdmFyIHRpZDsgLy8gdGltZW91dCBpZFxuICAgICAgICB2YXIgZGVib3VuY2VkQ2hlY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGlkKTtcbiAgICAgICAgICAgIHRpZCA9IHNldFRpbWVvdXQoY2hlY2tVc2VFbGVtcywgMTAwKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHVub2JzZXJ2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH07XG4gICAgICAgIHZhciBvYnNlcnZlQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBvYnNlcnZlcjtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGRlYm91bmNlZENoZWNrLCBmYWxzZSk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9yaWVudGF0aW9uY2hhbmdlXCIsIGRlYm91bmNlZENoZWNrLCBmYWxzZSk7XG4gICAgICAgICAgICBpZiAod2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgICAgICBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGRlYm91bmNlZENoZWNrKTtcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHN1YnRyZWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB1bm9ic2VydmVDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgZGVib3VuY2VkQ2hlY2ssIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIiwgZGVib3VuY2VkQ2hlY2ssIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoaWdub3JlKSB7fVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NU3VidHJlZU1vZGlmaWVkXCIsIGRlYm91bmNlZENoZWNrLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdW5vYnNlcnZlQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01TdWJ0cmVlTW9kaWZpZWRcIiwgZGVib3VuY2VkQ2hlY2ssIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgZGVib3VuY2VkQ2hlY2ssIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLCBkZWJvdW5jZWRDaGVjaywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciBjcmVhdGVSZXF1ZXN0ID0gZnVuY3Rpb24gKHVybCkge1xuICAgICAgICAgICAgLy8gSW4gSUUgOSwgY3Jvc3Mgb3JpZ2luIHJlcXVlc3RzIGNhbiBvbmx5IGJlIHNlbnQgdXNpbmcgWERvbWFpblJlcXVlc3QuXG4gICAgICAgICAgICAvLyBYRG9tYWluUmVxdWVzdCB3b3VsZCBmYWlsIGlmIENPUlMgaGVhZGVycyBhcmUgbm90IHNldC5cbiAgICAgICAgICAgIC8vIFRoZXJlZm9yZSwgWERvbWFpblJlcXVlc3Qgc2hvdWxkIG9ubHkgYmUgdXNlZCB3aXRoIGNyb3NzIG9yaWdpbiByZXF1ZXN0cy5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldE9yaWdpbihsb2MpIHtcbiAgICAgICAgICAgICAgICB2YXIgYTtcbiAgICAgICAgICAgICAgICBpZiAobG9jLnByb3RvY29sICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYSA9IGxvYztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICAgICAgICAgICAgICAgIGEuaHJlZiA9IGxvYztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGEucHJvdG9jb2wucmVwbGFjZSgvOi9nLCBcIlwiKSArIGEuaG9zdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBSZXF1ZXN0O1xuICAgICAgICAgICAgdmFyIG9yaWdpbjtcbiAgICAgICAgICAgIHZhciBvcmlnaW4yO1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgIFJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICBvcmlnaW4gPSBnZXRPcmlnaW4obG9jYXRpb24pO1xuICAgICAgICAgICAgICAgIG9yaWdpbjIgPSBnZXRPcmlnaW4odXJsKTtcbiAgICAgICAgICAgICAgICBpZiAoUmVxdWVzdC53aXRoQ3JlZGVudGlhbHMgPT09IHVuZGVmaW5lZCAmJiBvcmlnaW4yICE9PSBcIlwiICYmIG9yaWdpbjIgIT09IG9yaWdpbikge1xuICAgICAgICAgICAgICAgICAgICBSZXF1ZXN0ID0gWERvbWFpblJlcXVlc3QgfHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIFJlcXVlc3QgPSBYTUxIdHRwUmVxdWVzdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUmVxdWVzdDtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHhsaW5rTlMgPSBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIjtcbiAgICAgICAgY2hlY2tVc2VFbGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBiYXNlO1xuICAgICAgICAgICAgdmFyIGJjcjtcbiAgICAgICAgICAgIHZhciBmYWxsYmFjayA9IFwiXCI7IC8vIG9wdGlvbmFsIGZhbGxiYWNrIFVSTCBpbiBjYXNlIG5vIGJhc2UgcGF0aCB0byBTVkcgZmlsZSB3YXMgZ2l2ZW4gYW5kIG5vIHN5bWJvbCBkZWZpbml0aW9uIHdhcyBmb3VuZC5cbiAgICAgICAgICAgIHZhciBoYXNoO1xuICAgICAgICAgICAgdmFyIGhyZWY7XG4gICAgICAgICAgICB2YXIgaTtcbiAgICAgICAgICAgIHZhciBpblByb2dyZXNzQ291bnQgPSAwO1xuICAgICAgICAgICAgdmFyIGlzSGlkZGVuO1xuICAgICAgICAgICAgdmFyIFJlcXVlc3Q7XG4gICAgICAgICAgICB2YXIgdXJsO1xuICAgICAgICAgICAgdmFyIHVzZXM7XG4gICAgICAgICAgICB2YXIgeGhyO1xuICAgICAgICAgICAgZnVuY3Rpb24gb2JzZXJ2ZUlmRG9uZSgpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBkb25lIHdpdGggbWFraW5nIGNoYW5nZXMsIHN0YXJ0IHdhdGNoaW5nIGZvciBjaGFnbmVzIGluIERPTSBhZ2FpblxuICAgICAgICAgICAgICAgIGluUHJvZ3Jlc3NDb3VudCAtPSAxO1xuICAgICAgICAgICAgICAgIGlmIChpblByb2dyZXNzQ291bnQgPT09IDApIHsgLy8gaWYgYWxsIHhocnMgd2VyZSByZXNvbHZlZFxuICAgICAgICAgICAgICAgICAgICB1bm9ic2VydmVDaGFuZ2VzKCk7IC8vIG1ha2Ugc3VyZSB0byByZW1vdmUgb2xkIGhhbmRsZXJzXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVDaGFuZ2VzKCk7IC8vIHdhdGNoIGZvciBjaGFuZ2VzIHRvIERPTVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGF0dHJVcGRhdGVGdW5jKHNwZWMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVbc3BlYy5iYXNlXSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3BlYy51c2VFbC5zZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBcInhsaW5rOmhyZWZcIiwgXCIjXCIgKyBzcGVjLmhhc2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNwZWMudXNlRWwuaGFzQXR0cmlidXRlKFwiaHJlZlwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWMudXNlRWwuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBcIiNcIiArIHNwZWMuaGFzaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gb25sb2FkRnVuYyh4aHIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInhcIik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdmc7XG4gICAgICAgICAgICAgICAgICAgIHhoci5vbmxvYWQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB4LmlubmVySFRNTCA9IHhoci5yZXNwb25zZVRleHQ7XG4gICAgICAgICAgICAgICAgICAgIHN2ZyA9IHguZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdmdcIilbMF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCBcInRydWVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdmcuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdmcuc3R5bGUud2lkdGggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ZnLnN0eWxlLmhlaWdodCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdmcuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9keS5pbnNlcnRCZWZvcmUoc3ZnLCBib2R5LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVJZkRvbmUoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gb25FcnJvclRpbWVvdXQoeGhyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB4aHIub250aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZUlmRG9uZSgpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1bm9ic2VydmVDaGFuZ2VzKCk7IC8vIHN0b3Agd2F0Y2hpbmcgZm9yIGNoYW5nZXMgdG8gRE9NXG4gICAgICAgICAgICAvLyBmaW5kIGFsbCB1c2UgZWxlbWVudHNcbiAgICAgICAgICAgIHVzZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInVzZVwiKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB1c2VzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYmNyID0gdXNlc1tpXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChpZ25vcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZmFpbGVkIHRvIGdldCBib3VuZGluZyByZWN0YW5nbGUgb2YgdGhlIHVzZSBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIGJjciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBocmVmID0gdXNlc1tpXS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCB1c2VzW2ldLmdldEF0dHJpYnV0ZU5TKHhsaW5rTlMsIFwiaHJlZlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgdXNlc1tpXS5nZXRBdHRyaWJ1dGUoXCJ4bGluazpocmVmXCIpO1xuICAgICAgICAgICAgICAgIGlmIChocmVmICYmIGhyZWYuc3BsaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsID0gaHJlZi5zcGxpdChcIiNcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsID0gW1wiXCIsIFwiXCJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBiYXNlID0gdXJsWzBdO1xuICAgICAgICAgICAgICAgIGhhc2ggPSB1cmxbMV07XG4gICAgICAgICAgICAgICAgaXNIaWRkZW4gPSBiY3IgJiYgYmNyLmxlZnQgPT09IDAgJiYgYmNyLnJpZ2h0ID09PSAwICYmIGJjci50b3AgPT09IDAgJiYgYmNyLmJvdHRvbSA9PT0gMDtcbiAgICAgICAgICAgICAgICBpZiAoYmNyICYmIGJjci53aWR0aCA9PT0gMCAmJiBiY3IuaGVpZ2h0ID09PSAwICYmICFpc0hpZGRlbikge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgdXNlIGVsZW1lbnQgaXMgZW1wdHlcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSByZWZlcmVuY2UgdG8gYW4gZXh0ZXJuYWwgU1ZHLCB0cnkgdG8gZmV0Y2ggaXRcbiAgICAgICAgICAgICAgICAgICAgLy8gdXNlIHRoZSBvcHRpb25hbCBmYWxsYmFjayBVUkwgaWYgdGhlcmUgaXMgbm8gcmVmZXJlbmNlIHRvIGFuIGV4dGVybmFsIFNWR1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmFsbGJhY2sgJiYgIWJhc2UubGVuZ3RoICYmIGhhc2ggJiYgIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGhhc2gpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlID0gZmFsbGJhY2s7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXNbaV0uaGFzQXR0cmlidXRlKFwiaHJlZlwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlc1tpXS5zZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBcInhsaW5rOmhyZWZcIiwgaHJlZik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGJhc2UubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzY2hlZHVsZSB1cGRhdGluZyB4bGluazpocmVmXG4gICAgICAgICAgICAgICAgICAgICAgICB4aHIgPSBjYWNoZVtiYXNlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4aHIgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cnVlIHNpZ25pZmllcyB0aGF0IHByZXBlbmRpbmcgdGhlIFNWRyB3YXMgbm90IHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChhdHRyVXBkYXRlRnVuYyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZUVsOiB1c2VzW2ldLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlOiBiYXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNoOiBoYXNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHhociA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWVzdCA9IGNyZWF0ZVJlcXVlc3QoYmFzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJlcXVlc3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIgPSBuZXcgUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZVtiYXNlXSA9IHhocjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLm9ubG9hZCA9IG9ubG9hZEZ1bmMoeGhyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBvbkVycm9yVGltZW91dCh4aHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIub250aW1lb3V0ID0gb25FcnJvclRpbWVvdXQoeGhyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLm9wZW4oXCJHRVRcIiwgYmFzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5zZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluUHJvZ3Jlc3NDb3VudCArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNIaWRkZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZVtiYXNlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgdGhpcyBVUkwgaWYgdGhlIHVzZSBlbGVtZW50IHdhcyBub3QgZW1wdHkgYW5kIG5vIHJlcXVlc3Qgd2FzIHNlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZVtiYXNlXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNhY2hlW2Jhc2VdLm9ubG9hZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGl0IHR1cm5zIG91dCB0aGF0IHByZXBlbmRpbmcgdGhlIFNWRyBpcyBub3QgbmVjZXNzYXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFib3J0IHRoZSBpbi1wcm9ncmVzcyB4aHIuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVbYmFzZV0uYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY2FjaGVbYmFzZV0ub25sb2FkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlW2Jhc2VdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChiYXNlLmxlbmd0aCAmJiBjYWNoZVtiYXNlXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChhdHRyVXBkYXRlRnVuYyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlRWw6IHVzZXNbaV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTogYmFzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNoOiBoYXNoXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1c2VzID0gXCJcIjtcbiAgICAgICAgICAgIGluUHJvZ3Jlc3NDb3VudCArPSAxO1xuICAgICAgICAgICAgb2JzZXJ2ZUlmRG9uZSgpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgd2luTG9hZDtcbiAgICAgICAgd2luTG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLCB3aW5Mb2FkLCBmYWxzZSk7IC8vIHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzXG4gICAgICAgICAgICB0aWQgPSBzZXRUaW1lb3V0KGNoZWNrVXNlRWxlbXMsIDApO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgICAgICAgICAvLyBUaGUgbG9hZCBldmVudCBmaXJlcyB3aGVuIGFsbCByZXNvdXJjZXMgaGF2ZSBmaW5pc2hlZCBsb2FkaW5nLCB3aGljaCBhbGxvd3MgZGV0ZWN0aW5nIHdoZXRoZXIgU1ZHIHVzZSBlbGVtZW50cyBhcmUgZW1wdHkuXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgd2luTG9hZCwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gTm8gbmVlZCB0byBhZGQgYSBsaXN0ZW5lciBpZiB0aGUgZG9jdW1lbnQgaXMgYWxyZWFkeSBsb2FkZWQsIGluaXRpYWxpemUgaW1tZWRpYXRlbHkuXG4gICAgICAgICAgICB3aW5Mb2FkKCk7XG4gICAgICAgIH1cbiAgICB9XG59KCkpO1xuXG5mdW5jdGlvbiBtZW1vcnlHYW1lKCkge1xyXG4gICAgbGV0IGNhcmRBcnJheSA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdsZWFmJyxcclxuICAgICAgICAgICAgaW1nOiAnLi9hc3NldHMvaWNvbnMvc3ByaXRlLnN2ZyNsZWFmJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnYnJpZ2h0bmVzcy11cCcsXHJcbiAgICAgICAgICAgIGltZzogJy4vYXNzZXRzL2ljb25zL3Nwcml0ZS5zdmcjYnJpZ2h0bmVzcy11cCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ3N0YXInLFxyXG4gICAgICAgICAgICBpbWc6ICcuL2Fzc2V0cy9pY29ucy9zcHJpdGUuc3ZnI3N0YXInXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdmbGFtZScsXHJcbiAgICAgICAgICAgIGltZzogJy4vYXNzZXRzL2ljb25zL3Nwcml0ZS5zdmcjZmxhbWUnXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdtb3VudGFpbicsXHJcbiAgICAgICAgICAgIGltZzogJy4vYXNzZXRzL2ljb25zL3Nwcml0ZS5zdmcjbW91bnRhaW4nXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdtdXNpYycsXHJcbiAgICAgICAgICAgIGltZzogJy4vYXNzZXRzL2ljb25zL3Nwcml0ZS5zdmcjbXVzaWMnXHJcbiAgICAgICAgfVxyXG4gICAgXVxyXG5cclxuICAgIGNvbnN0IHJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVtb3J5LWdhbWVfX3Jvb3QnKVxyXG4gICAgY29uc3QgYWxlcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVtb3J5LWdhbWVfX2FsZXJ0JylcclxuICAgIGNvbnN0IGFsZXJ0TmV3R2FtZSA9IGFsZXJ0LnRleHRDb250ZW50XHJcbiAgICBjb25zdCByZXN1bHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVtb3J5LWdhbWVfX3Jlc3VsdCcpXHJcbiAgICBjb25zdCBidXR0b25OZXdHYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lbW9yeS1nYW1lX19idXR0b24nKVxyXG4gICAgY29uc3Qgc2VhcmNoSW1nUGF0aCA9ICcuL2Fzc2V0cy9pY29ucy9zcHJpdGUuc3ZnI3NlYXJjaCdcclxuICAgIGNvbnN0IGNoZWNrSW1nUGF0aCA9ICcuL2Fzc2V0cy9pY29ucy9zcHJpdGUuc3ZnI2NoZWNrJ1xyXG4gICAgbGV0IGNhcmRzXHJcbiAgICBsZXQgY2FyZHNDaG9zZW4gPSBbXVxyXG4gICAgbGV0IGNhcmRzQ2hvc2VuSWQgPSBbXVxyXG4gICAgbGV0IGNhcmRzV29uID0gW11cclxuICAgIGNhcmRBcnJheSA9IFsuLi5jYXJkQXJyYXksIC4uLmNhcmRBcnJheV1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVCb2FyZCgpIHtcclxuICAgICAgICBjYXJkQXJyYXkuc29ydCgoKSA9PiAwLjUgLSBNYXRoLnJhbmRvbSgpKVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhcmRBcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgY2FyZERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgICAgIGxldCBjYXJkSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcclxuXHJcbiAgICAgICAgICAgIGNhcmRJbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBzZWFyY2hJbWdQYXRoKVxyXG4gICAgICAgICAgICBjYXJkSW1nLnNldEF0dHJpYnV0ZSgnYWx0JywgJ2NhcmQnKVxyXG4gICAgICAgICAgICBjYXJkRGl2LnNldEF0dHJpYnV0ZSgnZGF0YS1tZW1vcnlnYW1laWQnLCBpKVxyXG4gICAgICAgICAgICBjYXJkRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZmxpcENhcmQpXHJcbiAgICAgICAgICAgIGNhcmREaXYuYXBwZW5kQ2hpbGQoY2FyZEltZylcclxuICAgICAgICAgICAgcm9vdC5hcHBlbmRDaGlsZChjYXJkRGl2KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2FyZHMgPSByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJ2RpdicpXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2hlY2tGb3JNYXRjaCgpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25PbmUgPSBjYXJkc0Nob3NlblswXVxyXG4gICAgICAgIGNvbnN0IG9wdGlvblR3byA9IGNhcmRzQ2hvc2VuWzFdXHJcbiAgICAgICAgY29uc3Qgb3B0aW9uT25lSWQgPSBjYXJkc0Nob3NlbklkWzBdXHJcbiAgICAgICAgY29uc3Qgb3B0aW9uVHdvSWQgPSBjYXJkc0Nob3NlbklkWzFdXHJcblxyXG4gICAgICAgIGlmIChvcHRpb25PbmVJZCA9PT0gb3B0aW9uVHdvSWQpIHtcclxuICAgICAgICAgICAgYWxlcnQudGV4dENvbnRlbnQgPSAnWW91IGhhdmUgY2xpY2tlZCB0aGUgc2FtZSBpbWFnZSdcclxuICAgICAgICAgICAgaGlkZUNhcmRzKClcclxuICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbk9uZSA9PT0gb3B0aW9uVHdvKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0LnRleHRDb250ZW50ID0gJ1lvdSBmb3VuZCBhIG1hdGNoJ1xyXG4gICAgICAgICAgICBjYXJkc1tvcHRpb25PbmVJZF0ucXVlcnlTZWxlY3RvcignaW1nJykuc2V0QXR0cmlidXRlKCdzcmMnLCBjaGVja0ltZ1BhdGgpXHJcbiAgICAgICAgICAgIGNhcmRzW29wdGlvblR3b0lkXS5xdWVyeVNlbGVjdG9yKCdpbWcnKS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGNoZWNrSW1nUGF0aClcclxuICAgICAgICAgICAgY2FyZHNbb3B0aW9uT25lSWRdLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZmxpcENhcmQpXHJcbiAgICAgICAgICAgIGNhcmRzW29wdGlvblR3b0lkXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGZsaXBDYXJkKVxyXG4gICAgICAgICAgICBjYXJkc1dvbi5wdXNoKGNhcmRzQ2hvc2VuSWQpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYWxlcnQudGV4dENvbnRlbnQgPSAnVHJ5IGFnYWluJ1xyXG4gICAgICAgICAgICBoaWRlQ2FyZHMoKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2FyZHNDaG9zZW4gPSBbXVxyXG4gICAgICAgIGNhcmRzQ2hvc2VuSWQgPSBbXVxyXG4gICAgICAgIHJlc3VsdC50ZXh0Q29udGVudCA9IGNhcmRzV29uLmxlbmd0aFxyXG5cclxuICAgICAgICBpZiAoY2FyZHNXb24ubGVuZ3RoID09PSBjYXJkQXJyYXkubGVuZ3RoLzIpIHtcclxuICAgICAgICAgICAgYWxlcnQudGV4dENvbnRlbnQgPSAnQ29uZ3JhdHVsYXRpb25zISBZb3UgZm91bmQgdGhlbSBhbGwnXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGZsaXBDYXJkKGV2ZW50KSB7XHJcbiAgICAgICAgbGV0IGNhcmRJbWcgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnZGl2JykucXVlcnlTZWxlY3RvcignaW1nJylcclxuICAgICAgICBsZXQgY2FyZElkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ2RpdicpLmdldEF0dHJpYnV0ZSgnZGF0YS1tZW1vcnlnYW1laWQnKVxyXG5cclxuICAgICAgICBjYXJkc0Nob3Nlbi5wdXNoKGNhcmRBcnJheVtjYXJkSWRdLm5hbWUpXHJcbiAgICAgICAgY2FyZHNDaG9zZW5JZC5wdXNoKGNhcmRJZClcclxuICAgICAgICBjYXJkSW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgY2FyZEFycmF5W2NhcmRJZF0uaW1nKVxyXG4gICAgICAgIGlmIChjYXJkc0Nob3Nlbi5sZW5ndGggPT09IDIpIHNldFRpbWVvdXQoY2hlY2tGb3JNYXRjaCwgNTAwKVxyXG4gICAgICAgIGlmIChjYXJkc0Nob3Nlbi5sZW5ndGggPiAyKSBoaWRlQ2FyZHMoKVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGhpZGVDYXJkcygpIHtcclxuICAgICAgICBjYXJkcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWNhcmRzV29uLmZsYXQoSW5maW5pdHkpLmluY2x1ZGVzKGl0ZW0uZGF0YXNldC5tZW1vcnlnYW1laWQpKSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpLnNldEF0dHJpYnV0ZSgnc3JjJywgc2VhcmNoSW1nUGF0aClcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUJvYXJkKClcclxuXHJcbiAgICBidXR0b25OZXdHYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbmV3R2FtZSlcclxuXHJcbiAgICBmdW5jdGlvbiBuZXdHYW1lKCkge1xyXG4gICAgICAgIGNhcmRzQ2hvc2VuID0gW11cclxuICAgICAgICBjYXJkc0Nob3NlbklkID0gW11cclxuICAgICAgICBjYXJkc1dvbiA9IFtdXHJcbiAgICAgICAgYWxlcnQudGV4dENvbnRlbnQgPSBhbGVydE5ld0dhbWVcclxuICAgICAgICByZXN1bHQudGV4dENvbnRlbnQgPSBjYXJkc1dvbi5sZW5ndGhcclxuICAgICAgICByb290LnRleHRDb250ZW50ID0gJydcclxuICAgICAgICBjcmVhdGVCb2FyZCgpXHJcbiAgICB9XHJcbn1cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XHJcblxyXG5mdW5jdGlvbiBvcGVuQWNjKGVsKSB7XHJcbiAgICBsZXQgcGFuZWwgPSBlbC5uZXh0RWxlbWVudFNpYmxpbmc7XHJcblxyXG4gICAgaWYgKHBhbmVsLnN0eWxlLm1heEhlaWdodCkge1xyXG4gICAgICAgIHBhbmVsLnN0eWxlLm1heEhlaWdodCA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChlbCA9PT0gY2hvb3NlVGl0bGUpIGNob29zZVRpdGxlLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpLnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGUoMTgwZGVnKSdcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGFuZWwuc3R5bGUubWF4SGVpZ2h0ID0gcGFuZWwuc2Nyb2xsSGVpZ2h0ICsgJ3B4JztcclxuXHJcbiAgICAgICAgaWYgKGVsID09PSBjaG9vc2VUaXRsZSkgY2hvb3NlVGl0bGUucXVlcnlTZWxlY3Rvcignc3ZnJykuc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZSgwZGVnKSdcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgY2hvb3NlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVyb19fdGl0bGUnKVxyXG5jb25zdCBnYW1lTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZXJvJykucXVlcnlTZWxlY3RvcigndWwnKVxyXG5jb25zdCBnYW1lQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb250ZW50X19pdGVtJylcclxuXHJcbm9wZW5BY2MoY2hvb3NlVGl0bGUpXHJcblxyXG5jaG9vc2VUaXRsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgb3BlbkFjYyhjaG9vc2VUaXRsZSlcclxufSlcclxuXHJcblxyXG5nYW1lTGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgbGV0IGNsaWNrZWRJdGVtID0gZXZlbnQudGFyZ2V0LmRhdGFzZXQudHlwZVxyXG4gICAgb3BlbkFjYyhjaG9vc2VUaXRsZSlcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdhbWVDb250ZW50Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgZ2FtZUNvbnRlbnRbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG5cclxuICAgICAgICBpZiAoZ2FtZUNvbnRlbnRbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKGNsaWNrZWRJdGVtKSkge1xyXG4gICAgICAgICAgICBnYW1lQ29udGVudFtpXS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KVxyXG5cclxubWVtb3J5R2FtZSgpXHJcbn0pIl19
