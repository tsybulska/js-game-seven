"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}
/*!
 * @copyright Copyright (c) 2017 IcoMoon.io
 * @license   Licensed under MIT license
 *            See https://github.com/Keyamoon/svgxuse
 * @version   1.2.6
 */function connectFour(e){var t=document.querySelector(".connect-four__root");document.querySelector("#connect-four__alert"),document.querySelector("#connect-four__result"),document.querySelector("#connect-four__button");!function(){for(var e=0;e<49;e++){var n=document.createElement("div");e>=42&&n.classList.add("taken"),t.appendChild(n)}t.querySelectorAll("div")}()}function memoryGame(e){var t,n=[{name:"leaf",img:"./assets/icons/sprite.svg#leaf"},{name:"brightness-up",img:"./assets/icons/sprite.svg#brightness-up"},{name:"star",img:"./assets/icons/sprite.svg#star"},{name:"flame",img:"./assets/icons/sprite.svg#flame"},{name:"mountain",img:"./assets/icons/sprite.svg#mountain"},{name:"music",img:"./assets/icons/sprite.svg#music"}],r=document.querySelector(".memory-game__root"),o=document.querySelector("#memory-game__alert"),a=document.querySelector("#memory-game__result"),i=document.querySelector("#memory-game__button"),s="./assets/icons/sprite.svg#search",c="./assets/icons/sprite.svg#check",u=[],l=[],m=[];function d(){var e=u[0],r=u[1],i=l[0],s=l[1];i===s?(o.textContent="You have clicked the same image",f()):e===r?(o.textContent="You found a match",t[i].querySelector("img").setAttribute("src",c),t[s].querySelector("img").setAttribute("src",c),t[i].removeEventListener("click",y),t[s].removeEventListener("click",y),m.push(l)):(o.textContent="Try again",f()),u=[],l=[],a.textContent=m.length,m.length===n.length/2&&(o.textContent="Congratulations! You found them all")}function y(e){var t=e.target.closest("div").querySelector("img"),r=e.target.closest("div").getAttribute("data-memorygameid");u.push(n[r].name),l.push(r),t.setAttribute("src",n[r].img),2===u.length&&setTimeout(d,500),u.length>2&&f()}function f(){t.forEach((function(e){m.flat(1/0).includes(e.dataset.memorygameid)||e.querySelector("img").setAttribute("src",s)}))}function h(){u=[],l=[],m=[],o.textContent="Flip two cards",a.textContent=m.length,r.textContent=""}n=[].concat(_toConsumableArray(n),_toConsumableArray(n)),i.addEventListener("click",(function(){e=!1,i.textContent="New game",h(),function(){n.sort((function(){return.5-Math.random()}));for(var e=0;e<n.length;e++){var o=document.createElement("div"),a=document.createElement("img");a.setAttribute("src",s),a.setAttribute("alt","card"),o.setAttribute("data-memorygameid",e),o.addEventListener("click",y),o.appendChild(a),r.appendChild(o)}t=r.querySelectorAll("div")}()})),e&&(h(),i.textContent="Start")}function whackAMole(e){var t,n,r,o,a=document.querySelector(".whack-a-mole__root"),i=document.querySelector("#whack-a-mole__time"),s=document.querySelector("#whack-a-mole__result"),c=document.querySelector("#whack-a-mole__button"),u="./assets/icons/sprite.svg#smiley",l=60,m=0;function d(){for(var e=0;e<6;e++){var n=document.createElement("div"),i=document.createElement("img");i.setAttribute("src",u),i.setAttribute("alt","mole"),n.setAttribute("data-whackamole",e),n.addEventListener("mouseup",f),n.appendChild(i),a.appendChild(n)}t=a.querySelectorAll("div"),r=setInterval(y,700),o=setInterval(h,1e3)}function y(){var e=t[Math.floor(6*Math.random())];t.forEach((function(e){e.querySelector("img").setAttribute("src",u),e.classList.remove("mole")})),e.classList.add("mole"),n=e.dataset.whackamole}function f(){this.dataset.whackamole===n&&(this.querySelector("img").setAttribute("src","./assets/icons/sprite.svg#smiley-f"),m++,s.textContent=m,n=null)}function h(){l--,i.textContent=l,0===parseInt(l)&&(clearInterval(r),clearInterval(o),s.textContent="Game over! Your final score is "+m)}function v(){m=0,s.textContent=m,n=null,clearInterval(r),clearInterval(o),l=60,i.textContent=l,a.textContent=""}c.addEventListener("click",(function(){e=!1,c.textContent="New game",v(),d()})),e&&(v(),c.textContent="Start")}!function(){if("undefined"!=typeof window&&window.addEventListener){var e,t,n,r=Object.create(null),o=function(){clearTimeout(t),t=setTimeout(e,100)},a=function(){},i=function(e){function t(e){var t;return void 0!==e.protocol?t=e:(t=document.createElement("a")).href=e,t.protocol.replace(/:/g,"")+t.host}var n,r,o;return window.XMLHttpRequest&&(n=new XMLHttpRequest,r=t(location),o=t(e),n=void 0===n.withCredentials&&""!==o&&o!==r?XDomainRequest||void 0:XMLHttpRequest),n},s="http://www.w3.org/1999/xlink";e=function(){var e,t,n,c,u,l,m,d,y,f,h=0;function v(){var e;0===(h-=1)&&(a(),window.addEventListener("resize",o,!1),window.addEventListener("orientationchange",o,!1),window.MutationObserver?((e=new MutationObserver(o)).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),a=function(){try{e.disconnect(),window.removeEventListener("resize",o,!1),window.removeEventListener("orientationchange",o,!1)}catch(e){}}):(document.documentElement.addEventListener("DOMSubtreeModified",o,!1),a=function(){document.documentElement.removeEventListener("DOMSubtreeModified",o,!1),window.removeEventListener("resize",o,!1),window.removeEventListener("orientationchange",o,!1)}))}function g(e){return function(){!0!==r[e.base]&&(e.useEl.setAttributeNS(s,"xlink:href","#"+e.hash),e.useEl.hasAttribute("href")&&e.useEl.setAttribute("href","#"+e.hash))}}function p(e){return function(){var t,n=document.body,r=document.createElement("x");e.onload=null,r.innerHTML=e.responseText,(t=r.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",n.insertBefore(t,n.firstChild)),v()}}function b(e){return function(){e.onerror=null,e.ontimeout=null,v()}}for(a(),y=document.getElementsByTagName("use"),u=0;u<y.length;u+=1){try{t=y[u].getBoundingClientRect()}catch(e){t=!1}e=(d=(c=y[u].getAttribute("href")||y[u].getAttributeNS(s,"href")||y[u].getAttribute("xlink:href"))&&c.split?c.split("#"):["",""])[0],n=d[1],l=t&&0===t.left&&0===t.right&&0===t.top&&0===t.bottom,t&&0===t.width&&0===t.height&&!l?(y[u].hasAttribute("href")&&y[u].setAttributeNS(s,"xlink:href",c),e.length&&(!0!==(f=r[e])&&setTimeout(g({useEl:y[u],base:e,hash:n}),0),void 0===f&&void 0!==(m=i(e))&&(f=new m,r[e]=f,f.onload=p(f),f.onerror=b(f),f.ontimeout=b(f),f.open("GET",e),f.send(),h+=1))):l?e.length&&r[e]&&setTimeout(g({useEl:y[u],base:e,hash:n}),0):void 0===r[e]?r[e]=!0:r[e].onload&&(r[e].abort(),delete r[e].onload,r[e]=!0)}y="",h+=1,v()},n=function(){window.removeEventListener("load",n,!1),t=setTimeout(e,0)},"complete"!==document.readyState?window.addEventListener("load",n,!1):n()}}(),document.addEventListener("DOMContentLoaded",(function(){function e(e){var n=e.nextElementSibling;n.style.maxHeight?(n.style.maxHeight=null,e===t&&(t.querySelector("svg").style.transform="rotate(180deg)")):(n.style.maxHeight=n.scrollHeight+"px",e===t&&(t.querySelector("svg").style.transform="rotate(0deg)"))}var t=document.querySelector(".hero__title"),n=document.querySelector(".hero").querySelector("ul"),r=n.querySelectorAll("li"),o=document.querySelectorAll(".content__item"),a=!0;e(t),t.addEventListener("click",(function(){e(t)})),n.addEventListener("click",(function(n){var i=n.target,s=i.dataset.type;e(t),r.forEach((function(e){e.style.textDecoration="none",e.querySelector("svg").style.opacity="0"})),memoryGame(a),whackAMole(a),connectFour(a);for(var c=0;c<o.length;c++)o[c].style.display="none",o[c].classList.contains(s)&&(o[c].style.display="flex",i.style.textDecoration="underline",i.querySelector("svg").style.opacity="1","memory-game"===s?memoryGame():"whack-a-mole"===s?whackAMole():"connect-four"===s&&connectFour())}))}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJyIiwiX2FycmF5V2l0aG91dEhvbGVzIiwiX2l0ZXJhYmxlVG9BcnJheSIsIl91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSIsIl9ub25JdGVyYWJsZVNwcmVhZCIsIlR5cGVFcnJvciIsIm8iLCJtaW5MZW4iLCJfYXJyYXlMaWtlVG9BcnJheSIsIm4iLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJzbGljZSIsImNvbnN0cnVjdG9yIiwibmFtZSIsIkFycmF5IiwiZnJvbSIsInRlc3QiLCJpdGVyIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJpc0FycmF5IiwibGVuIiwibGVuZ3RoIiwiaSIsImFycjIiLCJjb25uZWN0Rm91ciIsInN0b3BHYW1lRmxhZyIsIiRyb290IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic3F1YXJlRGl2IiwiY3JlYXRlRWxlbWVudCIsInNxdWFyZUFtb3VudCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwicXVlcnlTZWxlY3RvckFsbCIsImNyZWF0ZUJvYXJkIiwibWVtb3J5R2FtZSIsImNhcmRzIiwiY2FyZEFycmF5IiwiaW1nIiwiJGFsZXJ0IiwiJHJlc3VsdCIsIiRidXR0b25OZXdHYW1lIiwic2VhcmNoSW1nUGF0aCIsImNoZWNrSW1nUGF0aCIsImNhcmRzQ2hvc2VuIiwiY2FyZHNDaG9zZW5JZCIsImNhcmRzV29uIiwiY2hlY2tGb3JNYXRjaCIsIm9wdGlvbk9uZSIsIm9wdGlvblR3byIsIm9wdGlvbk9uZUlkIiwib3B0aW9uVHdvSWQiLCJ0ZXh0Q29udGVudCIsImhpZGVDYXJkcyIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJmbGlwQ2FyZCIsInB1c2giLCJldmVudCIsImNhcmRJbWciLCJ0YXJnZXQiLCJjbG9zZXN0IiwiY2FyZElkIiwiZ2V0QXR0cmlidXRlIiwic2V0VGltZW91dCIsImZvckVhY2giLCJpdGVtIiwiZmxhdCIsIkluZmluaXR5IiwiaW5jbHVkZXMiLCJkYXRhc2V0IiwibWVtb3J5Z2FtZWlkIiwiY2xlYXJHYW1lIiwiY29uY2F0IiwiYWRkRXZlbnRMaXN0ZW5lciIsInNvcnQiLCJNYXRoIiwicmFuZG9tIiwiY2FyZERpdiIsIndoYWNrQU1vbGUiLCJzcXVhcmVzIiwiaGl0UG9zaXRpb24iLCJ0aW1lciIsImNvdW50RG93blRpbWVyIiwiJHRpbWUiLCJpbWdQYXRoIiwiY3VycmVudFRpbWUiLCJyZXN1bHQiLCJzcXVhcmVJbWciLCJjYWxjUmVzdWx0Iiwic2V0SW50ZXJ2YWwiLCJyYW5kb21TcXVhcmUiLCJjb3VudERvd24iLCJyYW5kb21Qb3NpdGlvbiIsImZsb29yIiwicmVtb3ZlIiwid2hhY2thbW9sZSIsInRoaXMiLCJwYXJzZUludCIsImNsZWFySW50ZXJ2YWwiLCJ3aW5kb3ciLCJjaGVja1VzZUVsZW1zIiwidGlkIiwid2luTG9hZCIsImNhY2hlIiwiY3JlYXRlIiwiZGVib3VuY2VkQ2hlY2siLCJjbGVhclRpbWVvdXQiLCJ1bm9ic2VydmVDaGFuZ2VzIiwiY3JlYXRlUmVxdWVzdCIsInVybCIsImdldE9yaWdpbiIsImxvYyIsImEiLCJ1bmRlZmluZWQiLCJwcm90b2NvbCIsImhyZWYiLCJyZXBsYWNlIiwiaG9zdCIsIlJlcXVlc3QiLCJvcmlnaW4iLCJvcmlnaW4yIiwiWE1MSHR0cFJlcXVlc3QiLCJsb2NhdGlvbiIsIndpdGhDcmVkZW50aWFscyIsIlhEb21haW5SZXF1ZXN0IiwieGxpbmtOUyIsImJhc2UiLCJiY3IiLCJoYXNoIiwiaXNIaWRkZW4iLCJ1c2VzIiwieGhyIiwiaW5Qcm9ncmVzc0NvdW50Iiwib2JzZXJ2ZUlmRG9uZSIsIm9ic2VydmVyIiwiTXV0YXRpb25PYnNlcnZlciIsIm9ic2VydmUiLCJkb2N1bWVudEVsZW1lbnQiLCJjaGlsZExpc3QiLCJzdWJ0cmVlIiwiYXR0cmlidXRlcyIsImRpc2Nvbm5lY3QiLCJpZ25vcmUiLCJhdHRyVXBkYXRlRnVuYyIsInNwZWMiLCJ1c2VFbCIsInNldEF0dHJpYnV0ZU5TIiwiaGFzQXR0cmlidXRlIiwib25sb2FkRnVuYyIsInN2ZyIsImJvZHkiLCJ4Iiwib25sb2FkIiwiaW5uZXJIVE1MIiwicmVzcG9uc2VUZXh0IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzdHlsZSIsInBvc2l0aW9uIiwid2lkdGgiLCJoZWlnaHQiLCJvdmVyZmxvdyIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJvbkVycm9yVGltZW91dCIsIm9uZXJyb3IiLCJvbnRpbWVvdXQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJnZXRBdHRyaWJ1dGVOUyIsInNwbGl0IiwibGVmdCIsInJpZ2h0IiwidG9wIiwiYm90dG9tIiwib3BlbiIsInNlbmQiLCJhYm9ydCIsInJlYWR5U3RhdGUiLCJvcGVuQWNjIiwiZWwiLCJwYW5lbCIsIm5leHRFbGVtZW50U2libGluZyIsIm1heEhlaWdodCIsImNob29zZVRpdGxlIiwidHJhbnNmb3JtIiwic2Nyb2xsSGVpZ2h0IiwiZ2FtZUxpc3QiLCJnYW1lTGlzdEl0ZW1zIiwiZ2FtZUNvbnRlbnQiLCJjbGlja2VkSXRlbSIsImNsaWNrZWRJdGVtTmFtZSIsInR5cGUiLCJ0ZXh0RGVjb3JhdGlvbiIsIm9wYWNpdHkiLCJkaXNwbGF5IiwiY29udGFpbnMiXSwibWFwcGluZ3MiOiJBQUFBLGFBRUEsU0FBU0EsbUJBQW1CQyxHQUFPLE9BQU9DLG1CQUFtQkQsSUFBUUUsaUJBQWlCRixJQUFRRyw0QkFBNEJILElBQVFJLHFCQUVsSSxTQUFTQSxxQkFBdUIsTUFBTSxJQUFJQyxVQUFVLHdJQUVwRCxTQUFTRiw0QkFBNEJHLEVBQUdDLEdBQVUsR0FBS0QsRUFBTCxDQUFnQixHQUFpQixpQkFBTkEsRUFBZ0IsT0FBT0Usa0JBQWtCRixFQUFHQyxHQUFTLElBQUlFLEVBQUlDLE9BQU9DLFVBQVVDLFNBQVNDLEtBQUtQLEdBQUdRLE1BQU0sR0FBSSxHQUFpRSxNQUFuRCxXQUFOTCxHQUFrQkgs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QUdaRyxFQUFTaEgsaUJBQWlCLFNBQVMsU0FBVWhCLEdBQ3pDLElBQUltSSxFQUFjbkksRUFBTUUsT0FDcEJrSSxFQUFrQkQsRUFBWXZILFFBQVF5SCxLQUUxQ2IsRUFBUUssR0FFUkksRUFBYzFILFNBQVEsU0FBQUMsR0FDbEJBLEVBQUsyRixNQUFNbUMsZUFBaUIsT0FDNUI5SCxFQUFLeEMsY0FBYyxPQUFPbUksTUFBTW9DLFFBQVUsT0FHOUM5SixXQUFXWixHQUNYd0QsV0FBV3hELEdBQ1hELFlBQVlDLEdBRVosSUFBSyxJQUFJSCxFQUFJLEVBQUdBLEVBQUl3SyxFQUFZekssT0FBUUMsSUFDcEN3SyxFQUFZeEssR0FBR3lJLE1BQU1xQyxRQUFVLE9BRTNCTixFQUFZeEssR0FBR1UsVUFBVXFLLFNBQVNMLEtBQ2xDRixFQUFZeEssR0FBR3lJLE1BQU1xQyxRQUFVLE9BQy9CTCxFQUFZaEMsTUFBTW1DLGVBQWlCLFlBQ25DSCxFQUFZbkssY0FBYyxPQUFPbUksTUFBTW9DLFFBQVUsSUFFekIsZ0JBQXBCSCxFQUNBM0osYUFDMkIsaUJBQXBCMkosRUFDUC9HLGFBQzJCLGlCQUFwQitHLEdBQ1B4SyIsImZpbGUiOiJzY3JpcHRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTcgSWNvTW9vbi5pb1xuICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0tleWFtb29uL3N2Z3h1c2VcbiAqIEB2ZXJzaW9uICAgMS4yLjZcbiAqL1xuLypqc2xpbnQgYnJvd3NlcjogdHJ1ZSAqL1xuLypnbG9iYWwgWERvbWFpblJlcXVlc3QsIE11dGF0aW9uT2JzZXJ2ZXIsIHdpbmRvdyAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICB2YXIgY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpOyAvLyBob2xkcyB4aHIgb2JqZWN0cyB0byBwcmV2ZW50IG11bHRpcGxlIHJlcXVlc3RzXG4gICAgICAgIHZhciBjaGVja1VzZUVsZW1zO1xuICAgICAgICB2YXIgdGlkOyAvLyB0aW1lb3V0IGlkXG4gICAgICAgIHZhciBkZWJvdW5jZWRDaGVjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aWQpO1xuICAgICAgICAgICAgdGlkID0gc2V0VGltZW91dChjaGVja1VzZUVsZW1zLCAxMDApO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgdW5vYnNlcnZlQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG9ic2VydmVDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG9ic2VydmVyO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgZGVib3VuY2VkQ2hlY2ssIGZhbHNlKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIiwgZGVib3VuY2VkQ2hlY2ssIGZhbHNlKTtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuTXV0YXRpb25PYnNlcnZlcikge1xuICAgICAgICAgICAgICAgIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZGVib3VuY2VkQ2hlY2spO1xuICAgICAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc3VidHJlZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHVub2JzZXJ2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBkZWJvdW5jZWRDaGVjaywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLCBkZWJvdW5jZWRDaGVjaywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChpZ25vcmUpIHt9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01TdWJ0cmVlTW9kaWZpZWRcIiwgZGVib3VuY2VkQ2hlY2ssIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB1bm9ic2VydmVDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTVN1YnRyZWVNb2RpZmllZFwiLCBkZWJvdW5jZWRDaGVjaywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBkZWJvdW5jZWRDaGVjaywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9yaWVudGF0aW9uY2hhbmdlXCIsIGRlYm91bmNlZENoZWNrLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGNyZWF0ZVJlcXVlc3QgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgICAgICAvLyBJbiBJRSA5LCBjcm9zcyBvcmlnaW4gcmVxdWVzdHMgY2FuIG9ubHkgYmUgc2VudCB1c2luZyBYRG9tYWluUmVxdWVzdC5cbiAgICAgICAgICAgIC8vIFhEb21haW5SZXF1ZXN0IHdvdWxkIGZhaWwgaWYgQ09SUyBoZWFkZXJzIGFyZSBub3Qgc2V0LlxuICAgICAgICAgICAgLy8gVGhlcmVmb3JlLCBYRG9tYWluUmVxdWVzdCBzaG91bGQgb25seSBiZSB1c2VkIHdpdGggY3Jvc3Mgb3JpZ2luIHJlcXVlc3RzLlxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0T3JpZ2luKGxvYykge1xuICAgICAgICAgICAgICAgIHZhciBhO1xuICAgICAgICAgICAgICAgIGlmIChsb2MucHJvdG9jb2wgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBhID0gbG9jO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgYS5ocmVmID0gbG9jO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYS5wcm90b2NvbC5yZXBsYWNlKC86L2csIFwiXCIpICsgYS5ob3N0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIFJlcXVlc3Q7XG4gICAgICAgICAgICB2YXIgb3JpZ2luO1xuICAgICAgICAgICAgdmFyIG9yaWdpbjI7XG4gICAgICAgICAgICBpZiAod2luZG93LlhNTEh0dHBSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgUmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgIG9yaWdpbiA9IGdldE9yaWdpbihsb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgb3JpZ2luMiA9IGdldE9yaWdpbih1cmwpO1xuICAgICAgICAgICAgICAgIGlmIChSZXF1ZXN0LndpdGhDcmVkZW50aWFscyA9PT0gdW5kZWZpbmVkICYmIG9yaWdpbjIgIT09IFwiXCIgJiYgb3JpZ2luMiAhPT0gb3JpZ2luKSB7XG4gICAgICAgICAgICAgICAgICAgIFJlcXVlc3QgPSBYRG9tYWluUmVxdWVzdCB8fCB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgUmVxdWVzdCA9IFhNTEh0dHBSZXF1ZXN0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBSZXF1ZXN0O1xuICAgICAgICB9O1xuICAgICAgICB2YXIgeGxpbmtOUyA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiO1xuICAgICAgICBjaGVja1VzZUVsZW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGJhc2U7XG4gICAgICAgICAgICB2YXIgYmNyO1xuICAgICAgICAgICAgdmFyIGZhbGxiYWNrID0gXCJcIjsgLy8gb3B0aW9uYWwgZmFsbGJhY2sgVVJMIGluIGNhc2Ugbm8gYmFzZSBwYXRoIHRvIFNWRyBmaWxlIHdhcyBnaXZlbiBhbmQgbm8gc3ltYm9sIGRlZmluaXRpb24gd2FzIGZvdW5kLlxuICAgICAgICAgICAgdmFyIGhhc2g7XG4gICAgICAgICAgICB2YXIgaHJlZjtcbiAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgdmFyIGluUHJvZ3Jlc3NDb3VudCA9IDA7XG4gICAgICAgICAgICB2YXIgaXNIaWRkZW47XG4gICAgICAgICAgICB2YXIgUmVxdWVzdDtcbiAgICAgICAgICAgIHZhciB1cmw7XG4gICAgICAgICAgICB2YXIgdXNlcztcbiAgICAgICAgICAgIHZhciB4aHI7XG4gICAgICAgICAgICBmdW5jdGlvbiBvYnNlcnZlSWZEb25lKCkge1xuICAgICAgICAgICAgICAgIC8vIElmIGRvbmUgd2l0aCBtYWtpbmcgY2hhbmdlcywgc3RhcnQgd2F0Y2hpbmcgZm9yIGNoYWduZXMgaW4gRE9NIGFnYWluXG4gICAgICAgICAgICAgICAgaW5Qcm9ncmVzc0NvdW50IC09IDE7XG4gICAgICAgICAgICAgICAgaWYgKGluUHJvZ3Jlc3NDb3VudCA9PT0gMCkgeyAvLyBpZiBhbGwgeGhycyB3ZXJlIHJlc29sdmVkXG4gICAgICAgICAgICAgICAgICAgIHVub2JzZXJ2ZUNoYW5nZXMoKTsgLy8gbWFrZSBzdXJlIHRvIHJlbW92ZSBvbGQgaGFuZGxlcnNcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZUNoYW5nZXMoKTsgLy8gd2F0Y2ggZm9yIGNoYW5nZXMgdG8gRE9NXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gYXR0clVwZGF0ZUZ1bmMoc3BlYykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZVtzcGVjLmJhc2VdICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGVjLnVzZUVsLnNldEF0dHJpYnV0ZU5TKHhsaW5rTlMsIFwieGxpbms6aHJlZlwiLCBcIiNcIiArIHNwZWMuaGFzaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BlYy51c2VFbC5oYXNBdHRyaWJ1dGUoXCJocmVmXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlYy51c2VFbC5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIFwiI1wiICsgc3BlYy5oYXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBvbmxvYWRGdW5jKHhocikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwieFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN2ZztcbiAgICAgICAgICAgICAgICAgICAgeGhyLm9ubG9hZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHguaW5uZXJIVE1MID0geGhyLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgc3ZnID0geC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInN2Z1wiKVswXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN2Zykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN2Zy5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN2Zy5zdHlsZS53aWR0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdmcuc3R5bGUuaGVpZ2h0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN2Zy5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5Lmluc2VydEJlZm9yZShzdmcsIGJvZHkuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZUlmRG9uZSgpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBvbkVycm9yVGltZW91dCh4aHIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB4aHIub25lcnJvciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHhoci5vbnRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlSWZEb25lKCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVub2JzZXJ2ZUNoYW5nZXMoKTsgLy8gc3RvcCB3YXRjaGluZyBmb3IgY2hhbmdlcyB0byBET01cbiAgICAgICAgICAgIC8vIGZpbmQgYWxsIHVzZSBlbGVtZW50c1xuICAgICAgICAgICAgdXNlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidXNlXCIpO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHVzZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBiY3IgPSB1c2VzW2ldLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGlnbm9yZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBmYWlsZWQgdG8gZ2V0IGJvdW5kaW5nIHJlY3RhbmdsZSBvZiB0aGUgdXNlIGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgYmNyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhyZWYgPSB1c2VzW2ldLmdldEF0dHJpYnV0ZShcImhyZWZcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IHVzZXNbaV0uZ2V0QXR0cmlidXRlTlMoeGxpbmtOUywgXCJocmVmXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCB1c2VzW2ldLmdldEF0dHJpYnV0ZShcInhsaW5rOmhyZWZcIik7XG4gICAgICAgICAgICAgICAgaWYgKGhyZWYgJiYgaHJlZi5zcGxpdCkge1xuICAgICAgICAgICAgICAgICAgICB1cmwgPSBocmVmLnNwbGl0KFwiI1wiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB1cmwgPSBbXCJcIiwgXCJcIl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJhc2UgPSB1cmxbMF07XG4gICAgICAgICAgICAgICAgaGFzaCA9IHVybFsxXTtcbiAgICAgICAgICAgICAgICBpc0hpZGRlbiA9IGJjciAmJiBiY3IubGVmdCA9PT0gMCAmJiBiY3IucmlnaHQgPT09IDAgJiYgYmNyLnRvcCA9PT0gMCAmJiBiY3IuYm90dG9tID09PSAwO1xuICAgICAgICAgICAgICAgIGlmIChiY3IgJiYgYmNyLndpZHRoID09PSAwICYmIGJjci5oZWlnaHQgPT09IDAgJiYgIWlzSGlkZGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSB1c2UgZWxlbWVudCBpcyBlbXB0eVxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIHJlZmVyZW5jZSB0byBhbiBleHRlcm5hbCBTVkcsIHRyeSB0byBmZXRjaCBpdFxuICAgICAgICAgICAgICAgICAgICAvLyB1c2UgdGhlIG9wdGlvbmFsIGZhbGxiYWNrIFVSTCBpZiB0aGVyZSBpcyBubyByZWZlcmVuY2UgdG8gYW4gZXh0ZXJuYWwgU1ZHXG4gICAgICAgICAgICAgICAgICAgIGlmIChmYWxsYmFjayAmJiAhYmFzZS5sZW5ndGggJiYgaGFzaCAmJiAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaGFzaCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2UgPSBmYWxsYmFjaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlc1tpXS5oYXNBdHRyaWJ1dGUoXCJocmVmXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VzW2ldLnNldEF0dHJpYnV0ZU5TKHhsaW5rTlMsIFwieGxpbms6aHJlZlwiLCBocmVmKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoYmFzZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNjaGVkdWxlIHVwZGF0aW5nIHhsaW5rOmhyZWZcbiAgICAgICAgICAgICAgICAgICAgICAgIHhociA9IGNhY2hlW2Jhc2VdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHhociAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRydWUgc2lnbmlmaWVzIHRoYXQgcHJlcGVuZGluZyB0aGUgU1ZHIHdhcyBub3QgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGF0dHJVcGRhdGVGdW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlRWw6IHVzZXNbaV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U6IGJhc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2g6IGhhc2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeGhyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZXF1ZXN0ID0gY3JlYXRlUmVxdWVzdChiYXNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoUmVxdWVzdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhociA9IG5ldyBSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlW2Jhc2VdID0geGhyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIub25sb2FkID0gb25sb2FkRnVuYyh4aHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIub25lcnJvciA9IG9uRXJyb3JUaW1lb3V0KHhocik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5vbnRpbWVvdXQgPSBvbkVycm9yVGltZW91dCh4aHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIub3BlbihcIkdFVFwiLCBiYXNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnNlbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5Qcm9ncmVzc0NvdW50ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0hpZGRlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlW2Jhc2VdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciB0aGlzIFVSTCBpZiB0aGUgdXNlIGVsZW1lbnQgd2FzIG5vdCBlbXB0eSBhbmQgbm8gcmVxdWVzdCB3YXMgc2VudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlW2Jhc2VdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FjaGVbYmFzZV0ub25sb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQgdHVybnMgb3V0IHRoYXQgcHJlcGVuZGluZyB0aGUgU1ZHIGlzIG5vdCBuZWNlc3NhcnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWJvcnQgdGhlIGluLXByb2dyZXNzIHhoci5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZVtiYXNlXS5hYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjYWNoZVtiYXNlXS5vbmxvYWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVbYmFzZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJhc2UubGVuZ3RoICYmIGNhY2hlW2Jhc2VdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGF0dHJVcGRhdGVGdW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VFbDogdXNlc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlOiBiYXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2g6IGhhc2hcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVzZXMgPSBcIlwiO1xuICAgICAgICAgICAgaW5Qcm9ncmVzc0NvdW50ICs9IDE7XG4gICAgICAgICAgICBvYnNlcnZlSWZEb25lKCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciB3aW5Mb2FkO1xuICAgICAgICB3aW5Mb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIHdpbkxvYWQsIGZhbHNlKTsgLy8gdG8gcHJldmVudCBtZW1vcnkgbGVha3NcbiAgICAgICAgICAgIHRpZCA9IHNldFRpbWVvdXQoY2hlY2tVc2VFbGVtcywgMCk7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9PSBcImNvbXBsZXRlXCIpIHtcbiAgICAgICAgICAgIC8vIFRoZSBsb2FkIGV2ZW50IGZpcmVzIHdoZW4gYWxsIHJlc291cmNlcyBoYXZlIGZpbmlzaGVkIGxvYWRpbmcsIHdoaWNoIGFsbG93cyBkZXRlY3Rpbmcgd2hldGhlciBTVkcgdXNlIGVsZW1lbnRzIGFyZSBlbXB0eS5cbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCB3aW5Mb2FkLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBObyBuZWVkIHRvIGFkZCBhIGxpc3RlbmVyIGlmIHRoZSBkb2N1bWVudCBpcyBhbHJlYWR5IGxvYWRlZCwgaW5pdGlhbGl6ZSBpbW1lZGlhdGVseS5cbiAgICAgICAgICAgIHdpbkxvYWQoKTtcbiAgICAgICAgfVxuICAgIH1cbn0oKSk7XG5cbmZ1bmN0aW9uIGNvbm5lY3RGb3VyKHN0b3BHYW1lRmxhZykge1xyXG4gICAgY29uc3Qgd2lubmluZ0FycmF5cyA9IFtcclxuICAgICAgICBbMCwgMSwgMiwgM10sXHJcbiAgICAgICAgWzQxLCA0MCwgMzksIDM4XSxcclxuICAgICAgICBbNywgOCwgOSwgMTBdLFxyXG4gICAgICAgIFszNCwgMzMsIDMyLCAzMV0sXHJcbiAgICAgICAgWzE0LCAxNSwgMTYsIDE3XSxcclxuICAgICAgICBbMjcsIDI2LCAyNSwgMjRdLFxyXG4gICAgICAgIFsyMSwgMjIsIDIzLCAyNF0sXHJcbiAgICAgICAgWzIwLCAxOSwgMTgsIDE3XSxcclxuICAgICAgICBbMjgsIDI5LCAzMCwgMzFdLFxyXG4gICAgICAgIFsxMywgMTIsIDExLCAxMF0sXHJcbiAgICAgICAgWzM1LCAzNiwgMzcsIDM4XSxcclxuICAgICAgICBbNiwgNSwgNCwgM10sXHJcbiAgICAgICAgWzAsIDcsIDE0LCAyMV0sXHJcbiAgICAgICAgWzQxLCAzNCwgMjcsIDIwXSxcclxuICAgICAgICBbMSwgOCwgMTUsIDIyXSxcclxuICAgICAgICBbNDAsIDMzLCAyNiwgMTldLFxyXG4gICAgICAgIFsyLCA5LCAxNiwgMjNdLFxyXG4gICAgICAgIFszOSwgMzIsIDI1LCAxOF0sXHJcbiAgICAgICAgWzMsIDEwLCAxNywgMjRdLFxyXG4gICAgICAgIFszOCwgMzEsIDI0LCAxN10sXHJcbiAgICAgICAgWzQsIDExLCAxOCwgMjVdLFxyXG4gICAgICAgIFszNywgMzAsIDIzLCAxNl0sXHJcbiAgICAgICAgWzUsIDEyLCAxOSwgMjZdLFxyXG4gICAgICAgIFszNiwgMjksIDIyLCAxNV0sXHJcbiAgICAgICAgWzYsIDEzLCAyMCwgMjddLFxyXG4gICAgICAgIFszNSwgMjgsIDIxLCAxNF0sXHJcbiAgICAgICAgWzAsIDgsIDE2LCAyNF0sXHJcbiAgICAgICAgWzQxLCAzMywgMjUsIDE3XSxcclxuICAgICAgICBbNywgMTUsIDIzLCAzMV0sXHJcbiAgICAgICAgWzM0LCAyNiwgMTgsIDEwXSxcclxuICAgICAgICBbMTQsIDIyLCAzMCwgMzhdLFxyXG4gICAgICAgIFsyNywgMTksIDExLCAzXSxcclxuICAgICAgICBbMzUsIDI5LCAyMywgMTddLFxyXG4gICAgICAgIFs2LCAxMiwgMTgsIDI0XSxcclxuICAgICAgICBbMjgsIDIyLCAxNiwgMTBdLFxyXG4gICAgICAgIFsxMywgMTksIDI1LCAzMV0sXHJcbiAgICAgICAgWzIxLCAxNSwgOSwgM10sXHJcbiAgICAgICAgWzIwLCAyNiwgMzIsIDM4XSxcclxuICAgICAgICBbMzYsIDMwLCAyNCwgMThdLFxyXG4gICAgICAgIFs1LCAxMSwgMTcsIDIzXSxcclxuICAgICAgICBbMzcsIDMxLCAyNSwgMTldLFxyXG4gICAgICAgIFs0LCAxMCwgMTYsIDIyXSxcclxuICAgICAgICBbMiwgMTAsIDE4LCAyNl0sXHJcbiAgICAgICAgWzM5LCAzMSwgMjMsIDE1XSxcclxuICAgICAgICBbMSwgOSwgMTcsIDI1XSxcclxuICAgICAgICBbNDAsIDMyLCAyNCwgMTZdLFxyXG4gICAgICAgIFs5LCAxNywgMjUsIDMzXSxcclxuICAgICAgICBbOCwgMTYsIDI0LCAzMl0sXHJcbiAgICAgICAgWzExLCAxNywgMjMsIDI5XSxcclxuICAgICAgICBbMTIsIDE4LCAyNCwgMzBdLFxyXG4gICAgICAgIFsxLCAyLCAzLCA0XSxcclxuICAgICAgICBbNSwgNCwgMywgMl0sXHJcbiAgICAgICAgWzgsIDksIDEwLCAxMV0sXHJcbiAgICAgICAgWzEyLCAxMSwgMTAsIDldLFxyXG4gICAgICAgIFsxNSwgMTYsIDE3LCAxOF0sXHJcbiAgICAgICAgWzE5LCAxOCwgMTcsIDE2XSxcclxuICAgICAgICBbMjIsIDIzLCAyNCwgMjVdLFxyXG4gICAgICAgIFsyNiwgMjUsIDI0LCAyM10sXHJcbiAgICAgICAgWzI5LCAzMCwgMzEsIDMyXSxcclxuICAgICAgICBbMzMsIDMyLCAzMSwgMzBdLFxyXG4gICAgICAgIFszNiwgMzcsIDM4LCAzOV0sXHJcbiAgICAgICAgWzQwLCAzOSwgMzgsIDM3XSxcclxuICAgICAgICBbNywgMTQsIDIxLCAyOF0sXHJcbiAgICAgICAgWzgsIDE1LCAyMiwgMjldLFxyXG4gICAgICAgIFs5LCAxNiwgMjMsIDMwXSxcclxuICAgICAgICBbMTAsIDE3LCAyNCwgMzFdLFxyXG4gICAgICAgIFsxMSwgMTgsIDI1LCAzMl0sXHJcbiAgICAgICAgWzEyLCAxOSwgMjYsIDMzXSxcclxuICAgICAgICBbMTMsIDIwLCAyNywgMzRdLFxyXG4gICAgXVxyXG5cclxuICAgIGNvbnN0ICRyb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbm5lY3QtZm91cl9fcm9vdCcpXHJcbiAgICBsZXQgJGFsZXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Nvbm5lY3QtZm91cl9fYWxlcnQnKVxyXG4gICAgbGV0ICRyZXN1bHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29ubmVjdC1mb3VyX19yZXN1bHQnKVxyXG4gICAgY29uc3QgJGJ1dHRvbk5ld0dhbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29ubmVjdC1mb3VyX19idXR0b24nKVxyXG5cclxuICAgIGxldCBzcXVhcmVzXHJcbiAgICBjb25zdCBzcXVhcmVBbW91bnQgPSA0OSAvLyA3KjYgKyA3XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlQm9hcmQoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcXVhcmVBbW91bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgc3F1YXJlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChpID49IHNxdWFyZUFtb3VudCAtIDcpIHNxdWFyZURpdi5jbGFzc0xpc3QuYWRkKCd0YWtlbicpXHJcbiAgICAgICAgICAgIC8vc3F1YXJlRGl2LnNldEF0dHJpYnV0ZSgnZGF0YS1jb25uZWN0Zm91cicsIGkpXHJcbiAgICAgICAgICAgIC8vc3F1YXJlRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBjYWxjUmVzdWx0KVxyXG4gICAgICAgICAgICAkcm9vdC5hcHBlbmRDaGlsZChzcXVhcmVEaXYpXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3F1YXJlcyA9ICRyb290LnF1ZXJ5U2VsZWN0b3JBbGwoJ2RpdicpXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQm9hcmQoKVxyXG59XG5mdW5jdGlvbiBtZW1vcnlHYW1lKHN0b3BHYW1lRmxhZykge1xyXG4gICAgbGV0IGNhcmRBcnJheSA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdsZWFmJyxcclxuICAgICAgICAgICAgaW1nOiAnLi9hc3NldHMvaWNvbnMvc3ByaXRlLnN2ZyNsZWFmJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnYnJpZ2h0bmVzcy11cCcsXHJcbiAgICAgICAgICAgIGltZzogJy4vYXNzZXRzL2ljb25zL3Nwcml0ZS5zdmcjYnJpZ2h0bmVzcy11cCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ3N0YXInLFxyXG4gICAgICAgICAgICBpbWc6ICcuL2Fzc2V0cy9pY29ucy9zcHJpdGUuc3ZnI3N0YXInXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdmbGFtZScsXHJcbiAgICAgICAgICAgIGltZzogJy4vYXNzZXRzL2ljb25zL3Nwcml0ZS5zdmcjZmxhbWUnXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdtb3VudGFpbicsXHJcbiAgICAgICAgICAgIGltZzogJy4vYXNzZXRzL2ljb25zL3Nwcml0ZS5zdmcjbW91bnRhaW4nXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdtdXNpYycsXHJcbiAgICAgICAgICAgIGltZzogJy4vYXNzZXRzL2ljb25zL3Nwcml0ZS5zdmcjbXVzaWMnXHJcbiAgICAgICAgfVxyXG4gICAgXVxyXG5cclxuICAgIGNvbnN0ICRyb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbW9yeS1nYW1lX19yb290JylcclxuICAgIGxldCAkYWxlcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVtb3J5LWdhbWVfX2FsZXJ0JylcclxuICAgIGxldCAkcmVzdWx0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lbW9yeS1nYW1lX19yZXN1bHQnKVxyXG4gICAgY29uc3QgJGJ1dHRvbk5ld0dhbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVtb3J5LWdhbWVfX2J1dHRvbicpXHJcbiAgICBjb25zdCBhbGVydE5ld0dhbWUgPSAnRmxpcCB0d28gY2FyZHMnXHJcbiAgICBjb25zdCBzZWFyY2hJbWdQYXRoID0gJy4vYXNzZXRzL2ljb25zL3Nwcml0ZS5zdmcjc2VhcmNoJ1xyXG4gICAgY29uc3QgY2hlY2tJbWdQYXRoID0gJy4vYXNzZXRzL2ljb25zL3Nwcml0ZS5zdmcjY2hlY2snXHJcbiAgICBsZXQgY2FyZHNcclxuICAgIGxldCBjYXJkc0Nob3NlbiA9IFtdXHJcbiAgICBsZXQgY2FyZHNDaG9zZW5JZCA9IFtdXHJcbiAgICBsZXQgY2FyZHNXb24gPSBbXVxyXG4gICAgY2FyZEFycmF5ID0gWy4uLmNhcmRBcnJheSwgLi4uY2FyZEFycmF5XVxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUJvYXJkKCkge1xyXG4gICAgICAgIGNhcmRBcnJheS5zb3J0KCgpID0+IDAuNSAtIE1hdGgucmFuZG9tKCkpXHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FyZEFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBjYXJkRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICAgICAgbGV0IGNhcmRJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxyXG5cclxuICAgICAgICAgICAgY2FyZEltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIHNlYXJjaEltZ1BhdGgpXHJcbiAgICAgICAgICAgIGNhcmRJbWcuc2V0QXR0cmlidXRlKCdhbHQnLCAnY2FyZCcpXHJcbiAgICAgICAgICAgIGNhcmREaXYuc2V0QXR0cmlidXRlKCdkYXRhLW1lbW9yeWdhbWVpZCcsIGkpXHJcbiAgICAgICAgICAgIGNhcmREaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmbGlwQ2FyZClcclxuICAgICAgICAgICAgY2FyZERpdi5hcHBlbmRDaGlsZChjYXJkSW1nKVxyXG4gICAgICAgICAgICAkcm9vdC5hcHBlbmRDaGlsZChjYXJkRGl2KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2FyZHMgPSAkcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCdkaXYnKVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNoZWNrRm9yTWF0Y2goKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9uT25lID0gY2FyZHNDaG9zZW5bMF1cclxuICAgICAgICBjb25zdCBvcHRpb25Ud28gPSBjYXJkc0Nob3NlblsxXVxyXG4gICAgICAgIGNvbnN0IG9wdGlvbk9uZUlkID0gY2FyZHNDaG9zZW5JZFswXVxyXG4gICAgICAgIGNvbnN0IG9wdGlvblR3b0lkID0gY2FyZHNDaG9zZW5JZFsxXVxyXG5cclxuICAgICAgICBpZiAob3B0aW9uT25lSWQgPT09IG9wdGlvblR3b0lkKSB7XHJcbiAgICAgICAgICAgICRhbGVydC50ZXh0Q29udGVudCA9ICdZb3UgaGF2ZSBjbGlja2VkIHRoZSBzYW1lIGltYWdlJ1xyXG4gICAgICAgICAgICBoaWRlQ2FyZHMoKVxyXG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9uT25lID09PSBvcHRpb25Ud28pIHtcclxuICAgICAgICAgICAgJGFsZXJ0LnRleHRDb250ZW50ID0gJ1lvdSBmb3VuZCBhIG1hdGNoJ1xyXG4gICAgICAgICAgICBjYXJkc1tvcHRpb25PbmVJZF0ucXVlcnlTZWxlY3RvcignaW1nJykuc2V0QXR0cmlidXRlKCdzcmMnLCBjaGVja0ltZ1BhdGgpXHJcbiAgICAgICAgICAgIGNhcmRzW29wdGlvblR3b0lkXS5xdWVyeVNlbGVjdG9yKCdpbWcnKS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGNoZWNrSW1nUGF0aClcclxuICAgICAgICAgICAgY2FyZHNbb3B0aW9uT25lSWRdLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZmxpcENhcmQpXHJcbiAgICAgICAgICAgIGNhcmRzW29wdGlvblR3b0lkXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGZsaXBDYXJkKVxyXG4gICAgICAgICAgICBjYXJkc1dvbi5wdXNoKGNhcmRzQ2hvc2VuSWQpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJGFsZXJ0LnRleHRDb250ZW50ID0gJ1RyeSBhZ2FpbidcclxuICAgICAgICAgICAgaGlkZUNhcmRzKClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNhcmRzQ2hvc2VuID0gW11cclxuICAgICAgICBjYXJkc0Nob3NlbklkID0gW11cclxuICAgICAgICAkcmVzdWx0LnRleHRDb250ZW50ID0gY2FyZHNXb24ubGVuZ3RoXHJcblxyXG4gICAgICAgIGlmIChjYXJkc1dvbi5sZW5ndGggPT09IGNhcmRBcnJheS5sZW5ndGgvMikge1xyXG4gICAgICAgICAgICAkYWxlcnQudGV4dENvbnRlbnQgPSAnQ29uZ3JhdHVsYXRpb25zISBZb3UgZm91bmQgdGhlbSBhbGwnXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGZsaXBDYXJkKGV2ZW50KSB7XHJcbiAgICAgICAgbGV0IGNhcmRJbWcgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnZGl2JykucXVlcnlTZWxlY3RvcignaW1nJylcclxuICAgICAgICBsZXQgY2FyZElkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ2RpdicpLmdldEF0dHJpYnV0ZSgnZGF0YS1tZW1vcnlnYW1laWQnKVxyXG5cclxuICAgICAgICBjYXJkc0Nob3Nlbi5wdXNoKGNhcmRBcnJheVtjYXJkSWRdLm5hbWUpXHJcbiAgICAgICAgY2FyZHNDaG9zZW5JZC5wdXNoKGNhcmRJZClcclxuICAgICAgICBjYXJkSW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgY2FyZEFycmF5W2NhcmRJZF0uaW1nKVxyXG4gICAgICAgIGlmIChjYXJkc0Nob3Nlbi5sZW5ndGggPT09IDIpIHNldFRpbWVvdXQoY2hlY2tGb3JNYXRjaCwgNTAwKVxyXG4gICAgICAgIGlmIChjYXJkc0Nob3Nlbi5sZW5ndGggPiAyKSBoaWRlQ2FyZHMoKVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGhpZGVDYXJkcygpIHtcclxuICAgICAgICBjYXJkcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWNhcmRzV29uLmZsYXQoSW5maW5pdHkpLmluY2x1ZGVzKGl0ZW0uZGF0YXNldC5tZW1vcnlnYW1laWQpKSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpLnNldEF0dHJpYnV0ZSgnc3JjJywgc2VhcmNoSW1nUGF0aClcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsZWFyR2FtZSgpIHtcclxuICAgICAgICBjYXJkc0Nob3NlbiA9IFtdXHJcbiAgICAgICAgY2FyZHNDaG9zZW5JZCA9IFtdXHJcbiAgICAgICAgY2FyZHNXb24gPSBbXVxyXG4gICAgICAgICRhbGVydC50ZXh0Q29udGVudCA9IGFsZXJ0TmV3R2FtZVxyXG4gICAgICAgICRyZXN1bHQudGV4dENvbnRlbnQgPSBjYXJkc1dvbi5sZW5ndGhcclxuICAgICAgICAkcm9vdC50ZXh0Q29udGVudCA9ICcnXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbmV3R2FtZSgpIHtcclxuICAgICAgICBzdG9wR2FtZUZsYWcgPSBmYWxzZVxyXG4gICAgICAgICRidXR0b25OZXdHYW1lLnRleHRDb250ZW50ID0gJ05ldyBnYW1lJ1xyXG4gICAgICAgIGNsZWFyR2FtZSgpXHJcbiAgICAgICAgY3JlYXRlQm9hcmQoKVxyXG4gICAgfVxyXG5cclxuICAgICRidXR0b25OZXdHYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbmV3R2FtZSlcclxuXHJcbiAgICBpZiAoc3RvcEdhbWVGbGFnKSB7XHJcbiAgICAgICAgY2xlYXJHYW1lKClcclxuICAgICAgICAkYnV0dG9uTmV3R2FtZS50ZXh0Q29udGVudCA9ICdTdGFydCdcclxuICAgIH1cclxufVxuZnVuY3Rpb24gd2hhY2tBTW9sZShzdG9wR2FtZUZsYWcpIHtcclxuICAgIGNvbnN0ICRyb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndoYWNrLWEtbW9sZV9fcm9vdCcpXHJcbiAgICBsZXQgJHRpbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjd2hhY2stYS1tb2xlX190aW1lJylcclxuICAgIGxldCAkcmVzdWx0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3doYWNrLWEtbW9sZV9fcmVzdWx0JylcclxuICAgIGNvbnN0ICRidXR0b25OZXdHYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3doYWNrLWEtbW9sZV9fYnV0dG9uJylcclxuICAgIGNvbnN0IGltZ1BhdGggPSAnLi9hc3NldHMvaWNvbnMvc3ByaXRlLnN2ZyNzbWlsZXknXHJcbiAgICBjb25zdCBoaXRJbWdQYXRoID0gJy4vYXNzZXRzL2ljb25zL3Nwcml0ZS5zdmcjc21pbGV5LWYnXHJcbiAgICBcclxuICAgIGxldCBzcXVhcmVzXHJcbiAgICBjb25zdCBzcXVhcmVBbW91bnQgPSA2XHJcbiAgICBjb25zdCB0aW1lU3RhcnQgPSA2MFxyXG4gICAgbGV0IGN1cnJlbnRUaW1lID0gdGltZVN0YXJ0XHJcbiAgICBsZXQgcmVzdWx0ID0gMFxyXG4gICAgbGV0IGhpdFBvc2l0aW9uXHJcbiAgICBsZXQgdGltZXJcclxuICAgIGxldCBjb3VudERvd25UaW1lclxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUJvYXJkKCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3F1YXJlQW1vdW50OyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHNxdWFyZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgICAgIGxldCBzcXVhcmVJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxyXG5cclxuICAgICAgICAgICAgc3F1YXJlSW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgaW1nUGF0aClcclxuICAgICAgICAgICAgc3F1YXJlSW1nLnNldEF0dHJpYnV0ZSgnYWx0JywgJ21vbGUnKVxyXG4gICAgICAgICAgICBzcXVhcmVEaXYuc2V0QXR0cmlidXRlKCdkYXRhLXdoYWNrYW1vbGUnLCBpKVxyXG4gICAgICAgICAgICBzcXVhcmVEaXYuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGNhbGNSZXN1bHQpXHJcbiAgICAgICAgICAgIHNxdWFyZURpdi5hcHBlbmRDaGlsZChzcXVhcmVJbWcpXHJcbiAgICAgICAgICAgICRyb290LmFwcGVuZENoaWxkKHNxdWFyZURpdilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNxdWFyZXMgPSAkcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCdkaXYnKVxyXG4gICAgICAgIG1vdmVNb2xlKClcclxuICAgICAgICBjb3VudERvd25UaW1lciA9IHNldEludGVydmFsKGNvdW50RG93biwgMTAwMClcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByYW5kb21TcXVhcmUoKSB7XHJcbiAgICAgICAgbGV0IHJhbmRvbVBvc2l0aW9uID0gc3F1YXJlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzcXVhcmVBbW91bnQpXVxyXG5cclxuICAgICAgICBzcXVhcmVzLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0ucXVlcnlTZWxlY3RvcignaW1nJykuc2V0QXR0cmlidXRlKCdzcmMnLCBpbWdQYXRoKVxyXG4gICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ21vbGUnKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHJhbmRvbVBvc2l0aW9uLmNsYXNzTGlzdC5hZGQoJ21vbGUnKVxyXG4gICAgICAgIGhpdFBvc2l0aW9uID0gcmFuZG9tUG9zaXRpb24uZGF0YXNldC53aGFja2Ftb2xlXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2FsY1Jlc3VsdCgpIHtcclxuICAgICAgICBpZiAoKHRoaXMuZGF0YXNldC53aGFja2Ftb2xlID09PSBoaXRQb3NpdGlvbikpIHtcclxuICAgICAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKCdpbWcnKS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGhpdEltZ1BhdGgpXHJcbiAgICAgICAgICAgIHJlc3VsdCsrXHJcbiAgICAgICAgICAgICRyZXN1bHQudGV4dENvbnRlbnQgPSByZXN1bHRcclxuICAgICAgICAgICAgaGl0UG9zaXRpb24gPSBudWxsXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG1vdmVNb2xlKCkge1xyXG4gICAgICAgIHRpbWVyID0gc2V0SW50ZXJ2YWwocmFuZG9tU3F1YXJlLCA3MDApXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY291bnREb3duKCkge1xyXG4gICAgICAgIGN1cnJlbnRUaW1lLS1cclxuICAgICAgICAkdGltZS50ZXh0Q29udGVudCA9IGN1cnJlbnRUaW1lXHJcblxyXG4gICAgICAgIGlmIChwYXJzZUludChjdXJyZW50VGltZSkgPT09IDApIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcilcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChjb3VudERvd25UaW1lcilcclxuICAgICAgICAgICAgJHJlc3VsdC50ZXh0Q29udGVudCA9ICdHYW1lIG92ZXIhIFlvdXIgZmluYWwgc2NvcmUgaXMgJyArIHJlc3VsdFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjbGVhckdhbWUoKSB7XHJcbiAgICAgICAgcmVzdWx0ID0gMFxyXG4gICAgICAgICRyZXN1bHQudGV4dENvbnRlbnQgPSByZXN1bHRcclxuICAgICAgICBoaXRQb3NpdGlvbiA9IG51bGxcclxuICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKVxyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoY291bnREb3duVGltZXIpXHJcbiAgICAgICAgY3VycmVudFRpbWUgPSB0aW1lU3RhcnRcclxuICAgICAgICAkdGltZS50ZXh0Q29udGVudCA9IGN1cnJlbnRUaW1lXHJcbiAgICAgICAgJHJvb3QudGV4dENvbnRlbnQgPSAnJ1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG5ld0dhbWUoKSB7XHJcbiAgICAgICAgc3RvcEdhbWVGbGFnID0gZmFsc2VcclxuICAgICAgICAkYnV0dG9uTmV3R2FtZS50ZXh0Q29udGVudCA9ICdOZXcgZ2FtZSdcclxuICAgICAgICBjbGVhckdhbWUoKVxyXG4gICAgICAgIGNyZWF0ZUJvYXJkKClcclxuICAgIH1cclxuXHJcbiAgICAkYnV0dG9uTmV3R2FtZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG5ld0dhbWUpXHJcblxyXG4gICAgaWYgKHN0b3BHYW1lRmxhZykge1xyXG4gICAgICAgIGNsZWFyR2FtZSgpXHJcbiAgICAgICAgJGJ1dHRvbk5ld0dhbWUudGV4dENvbnRlbnQgPSAnU3RhcnQnXHJcbiAgICB9XHJcbn1cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XHJcbiAgICBmdW5jdGlvbiBvcGVuQWNjKGVsKSB7XHJcbiAgICAgICAgbGV0IHBhbmVsID0gZWwubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG5cclxuICAgICAgICBpZiAocGFuZWwuc3R5bGUubWF4SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHBhbmVsLnN0eWxlLm1heEhlaWdodCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICBpZiAoZWwgPT09IGNob29zZVRpdGxlKSBjaG9vc2VUaXRsZS5xdWVyeVNlbGVjdG9yKCdzdmcnKS5zdHlsZS50cmFuc2Zvcm0gPSAncm90YXRlKDE4MGRlZyknXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGFuZWwuc3R5bGUubWF4SGVpZ2h0ID0gcGFuZWwuc2Nyb2xsSGVpZ2h0ICsgJ3B4JztcclxuXHJcbiAgICAgICAgICAgIGlmIChlbCA9PT0gY2hvb3NlVGl0bGUpIGNob29zZVRpdGxlLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpLnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGUoMGRlZyknXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNob29zZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlcm9fX3RpdGxlJylcclxuICAgIGNvbnN0IGdhbWVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlcm8nKS5xdWVyeVNlbGVjdG9yKCd1bCcpXHJcbiAgICBjb25zdCBnYW1lTGlzdEl0ZW1zID0gZ2FtZUxpc3QucXVlcnlTZWxlY3RvckFsbCgnbGknKVxyXG4gICAgY29uc3QgZ2FtZUNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29udGVudF9faXRlbScpXHJcbiAgICBsZXQgc3RvcEdhbWVGbGFnID0gdHJ1ZVxyXG5cclxuICAgIG9wZW5BY2MoY2hvb3NlVGl0bGUpXHJcblxyXG4gICAgY2hvb3NlVGl0bGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgb3BlbkFjYyhjaG9vc2VUaXRsZSlcclxuICAgIH0pXHJcblxyXG4gICAgZ2FtZUxpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBsZXQgY2xpY2tlZEl0ZW0gPSBldmVudC50YXJnZXRcclxuICAgICAgICBsZXQgY2xpY2tlZEl0ZW1OYW1lID0gY2xpY2tlZEl0ZW0uZGF0YXNldC50eXBlXHJcblxyXG4gICAgICAgIG9wZW5BY2MoY2hvb3NlVGl0bGUpXHJcblxyXG4gICAgICAgIGdhbWVMaXN0SXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgaXRlbS5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdub25lJ1xyXG4gICAgICAgICAgICBpdGVtLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpLnN0eWxlLm9wYWNpdHkgPSAnMCdcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBtZW1vcnlHYW1lKHN0b3BHYW1lRmxhZylcclxuICAgICAgICB3aGFja0FNb2xlKHN0b3BHYW1lRmxhZylcclxuICAgICAgICBjb25uZWN0Rm91cihzdG9wR2FtZUZsYWcpXHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ2FtZUNvbnRlbnQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZ2FtZUNvbnRlbnRbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG5cclxuICAgICAgICAgICAgaWYgKGdhbWVDb250ZW50W2ldLmNsYXNzTGlzdC5jb250YWlucyhjbGlja2VkSXRlbU5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBnYW1lQ29udGVudFtpXS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnXHJcbiAgICAgICAgICAgICAgICBjbGlja2VkSXRlbS5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICd1bmRlcmxpbmUnXHJcbiAgICAgICAgICAgICAgICBjbGlja2VkSXRlbS5xdWVyeVNlbGVjdG9yKCdzdmcnKS5zdHlsZS5vcGFjaXR5ID0gJzEnXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNsaWNrZWRJdGVtTmFtZSA9PT0gJ21lbW9yeS1nYW1lJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbW9yeUdhbWUoKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjbGlja2VkSXRlbU5hbWUgPT09ICd3aGFjay1hLW1vbGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hhY2tBTW9sZSgpXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNsaWNrZWRJdGVtTmFtZSA9PT0gJ2Nvbm5lY3QtZm91cicpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0Rm91cigpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59KSJdfQ==
